<!DOCTYPE html>
<html>
	<head>
		<title>ArcGE Test</title>
	</head>
	<body>
		<h1>ArcGE Test</h1>
		<p id="a">author</p>
		<p id="v">version</p>
		<canvas id="c" width="320" height="240" style="border: 1px solid black;"></canvas>
		<script type="module">
			import { ArcGE, Scene2D, Rect2D, Camera2D } from "../lib/arcge.js";

			const a = document.getElementById("a");
			const v = document.getElementById("v");
			a.innerText = ArcGE.author;
			v.innerText = ArcGE.version;

			const engine = new ArcGE("c");
			const myScene = new Scene2D(engine);

			myScene.setClearColor(0, 0, 0, 255);
			myScene.setBackground("https://static.wikia.nocookie.net/unanything/images/2/2a/Amogus.png");

			const myBox = new Rect2D(myScene, 0, 0, 64, 64);
			myBox.setColor(0, 0, 255, 255);
			myBox.setTexture("https://static.wikia.nocookie.net/unanything/images/2/2a/Amogus.png");

			const myCamera = new Camera2D(myScene);
			
			console.log(engine);
			console.log(myScene);
			console.log(myBox);
			
			let speed = 5.0;
			
			engine.queueEvents();
			
			function loop(){
				myScene.render();
				myBox.draw();
				myCamera.view();
				

				if(engine.checkKeyState(engine.KeyCode.DOWN)){
					myBox.y += speed;
				}else if(engine.checkKeyState(engine.KeyCode.UP)){
					myBox.y -= speed;
				}else if(engine.checkKeyState(engine.KeyCode.RIGHT)){
					myCamera.x += speed;
				}else if(engine.checkKeyState(engine.KeyCode.LEFT)){
					myCamera.x -= speed;
				}

				requestAnimationFrame(loop);
			}
			requestAnimationFrame(loop);
		</script>
	</body>
</html>
